{% extends "base.njk" %}
{% block content %}
  <section class="section">
    <div class="container">
      <div class="columns is-centered">
        <div class="column is-10">
          <h1 class="title is-2 has-text-centered">Artwork Gallery</h1>
          <p class="subtitle has-text-centered">
            {{ count }} artwork{{ 's' if count != 1 else '' }} uploaded
          </p>

          {% if count === 0 %}
            <div class="box has-text-centered">
              <p class="has-text-grey">
                <span class="icon is-large">
                  <i class="fas fa-images fa-3x"></i>
                </span>
              </p>
              <p class="mt-3">No artworks uploaded yet.</p>
            </div>
          {% else %}
            <div class="columns is-multiline">
              {% for artwork in artworks %}
                <div class="column is-one-third-desktop is-half-tablet">
                  <div class="card">
                    <div class="card-image">
                      <figure class="image is-square">
                        <img src="{{ artwork.url }}" alt="{{ artwork.filename }}" style="object-fit: cover; width: 100%; height: 100%;">
                      </figure>
                    </div>
                    <div class="card-content">
                      <div class="content">
                        <p class="is-size-7 has-text-weight-semibold" style="word-break: break-all;">
                          {{ artwork.filename }}
                        </p>
                        <p class="is-size-7 has-text-grey">
                          <span class="icon-text">
                            <span class="icon">
                              <i class="fas fa-calendar"></i>
                            </span>
                            <span>{{ artwork.uploadedAt.toLocaleDateString() }}</span>
                          </span>
                        </p>
                        <p class="is-size-7 has-text-grey">
                          <span class="icon-text">
                            <span class="icon">
                              <i class="fas fa-file"></i>
                            </span>
                            <span>{{ (artwork.size / 1024).toFixed(1) }} KB</span>
                          </span>
                        </p>
                      </div>
                      <div class="buttons">
                        <a href="{{ artwork.url }}" target="_blank" class="button is-small is-primary is-light is-fullwidth">
                          <span class="icon">
                            <i class="fas fa-external-link-alt"></i>
                          </span>
                          <span>View Full Size</span>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              {% endfor %}
            </div>
          {% endif %}

          <div class="has-text-centered mt-5">
            <a href="/" class="button is-primary">
              <span class="icon">
                <i class="fas fa-home"></i>
              </span>
              <span>Back to Home</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <style>
    .card {
      height: 100%;
      display: flex;
      flex-direction: column;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.1);
    }

    .card-content {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .image.is-square {
      background-color: #f5f5f5;
    }
  </style>
{% endblock %}
